<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>readme.html</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<pre># simple-get [![ci][ci-image]][ci-url] [![npm][npm-image]][npm-url] [![downloads][downloads-image]][downloads-url] [![javascript style guide][standard-image]][standard-url]

[ci-image]: https://img.shields.io/github/workflow/status/feross/simple-get/ci/master
[ci-url]: https://github.com/feross/simple-get/actions
[npm-image]: https://img.shields.io/npm/v/simple-get.svg
[npm-url]: https://npmjs.org/package/simple-get
[downloads-image]: https://img.shields.io/npm/dm/simple-get.svg
[downloads-url]: https://npmjs.org/package/simple-get
[standard-image]: https://img.shields.io/badge/code_style-standard-brightgreen.svg
[standard-url]: https://standardjs.com

### Simplest way to make http get requests

## features

This module is the lightest possible wrapper on top of node.js `http`, but supporting these essential features:

- follows redirects
- automatically handles gzip/deflate responses
- supports HTTPS
- supports specifying a timeout
- supports convenience `url` key so there&#x27;s no need to use `url.parse` on the url when specifying options
- composes well with npm packages for features like cookies, proxies, form data, &amp; OAuth

All this in &lt; 100 lines of code.

## install

```
npm install simple-get
```

## usage

Note, all these examples also work in the browser with [browserify](http://browserify.org/).

### simple GET request

Doesn&#x27;t get easier than this:

```js
const get = require(&#x27;simple-get&#x27;)

get(&#x27;http://example.com&#x27;, function (err, res) {
  if (err) throw err
  console.log(res.statusCode) // 200
  res.pipe(process.stdout) // `res` is a stream
})
```

### even simpler GET request

If you just want the data, and don&#x27;t want to deal with streams:

```js
const get = require(&#x27;simple-get&#x27;)

get.concat(&#x27;http://example.com&#x27;, function (err, res, data) {
  if (err) throw err
  console.log(res.statusCode) // 200
  console.log(data) // Buffer(&#x27;this is the server response&#x27;)
})
```

### POST, PUT, PATCH, HEAD, DELETE support

For `POST`, call `get.post` or use option `{ method: &#x27;POST&#x27; }`.

```js
const get = require(&#x27;simple-get&#x27;)

const opts = {
  url: &#x27;http://example.com&#x27;,
  body: &#x27;this is the POST body&#x27;
}
get.post(opts, function (err, res) {
  if (err) throw err
  res.pipe(process.stdout) // `res` is a stream
})
```

#### A more complex example:

```js
const get = require(&#x27;simple-get&#x27;)

get({
  url: &#x27;http://example.com&#x27;,
  method: &#x27;POST&#x27;,
  body: &#x27;this is the POST body&#x27;,

  // simple-get accepts all options that node.js `http` accepts
  // See: http://nodejs.org/api/http.html#http_http_request_options_callback
  headers: {
    &#x27;user-agent&#x27;: &#x27;my cool app&#x27;
  }
}, function (err, res) {
  if (err) throw err

  // All properties/methods from http.IncomingResponse are available,
  // even if a gunzip/inflate transform stream was returned.
  // See: http://nodejs.org/api/http.html#http_http_incomingmessage
  res.setTimeout(10000)
  console.log(res.headers)

  res.on(&#x27;data&#x27;, function (chunk) {
    // `chunk` is the decoded response, after it&#x27;s been gunzipped or inflated
    // (if applicable)
    console.log(&#x27;got a chunk of the response: &#x27; + chunk)
  }))

})
```

### JSON

You can serialize/deserialize request and response with JSON:

```js
const get = require(&#x27;simple-get&#x27;)

const opts = {
  method: &#x27;POST&#x27;,
  url: &#x27;http://example.com&#x27;,
  body: {
    key: &#x27;value&#x27;
  },
  json: true
}
get.concat(opts, function (err, res, data) {
  if (err) throw err
  console.log(data.key) // `data` is an object
})
```

### Timeout

You can set a timeout (in milliseconds) on the request with the `timeout` option.
If the request takes longer than `timeout` to complete, then the entire request
will fail with an `Error`.

```js
const get = require(&#x27;simple-get&#x27;)

const opts = {
  url: &#x27;http://example.com&#x27;,
  timeout: 2000 // 2 second timeout
}

get(opts, function (err, res) {})
```

### One Quick Tip

It&#x27;s a good idea to set the `&#x27;user-agent&#x27;` header so the provider can more easily
see how their resource is used.

```js
const get = require(&#x27;simple-get&#x27;)
const pkg = require(&#x27;./package.json&#x27;)

get(&#x27;http://example.com&#x27;, {
  headers: {
    &#x27;user-agent&#x27;: `my-module/${pkg.version} (https://github.com/username/my-module)`
  }
})
```

### Proxies

You can use the [`tunnel`](https://github.com/koichik/node-tunnel) module with the
`agent` option to work with proxies:

```js
const get = require(&#x27;simple-get&#x27;)
const tunnel = require(&#x27;tunnel&#x27;)

const opts = {
  url: &#x27;http://example.com&#x27;,
  agent: tunnel.httpOverHttp({
    proxy: {
      host: &#x27;localhost&#x27;
    }
  })
}

get(opts, function (err, res) {})
```

### Cookies

You can use the [`cookie`](https://github.com/jshttp/cookie) module to include
cookies in a request:

```js
const get = require(&#x27;simple-get&#x27;)
const cookie = require(&#x27;cookie&#x27;)

const opts = {
  url: &#x27;http://example.com&#x27;,
  headers: {
    cookie: cookie.serialize(&#x27;foo&#x27;, &#x27;bar&#x27;)
  }
}

get(opts, function (err, res) {})
```

### Form data

You can use the [`form-data`](https://github.com/form-data/form-data) module to
create POST request with form data:

```js
const fs = require(&#x27;fs&#x27;)
const get = require(&#x27;simple-get&#x27;)
const FormData = require(&#x27;form-data&#x27;)
const form = new FormData()

form.append(&#x27;my_file&#x27;, fs.createReadStream(&#x27;/foo/bar.jpg&#x27;))

const opts = {
  url: &#x27;http://example.com&#x27;,
  body: form
}

get.post(opts, function (err, res) {})
```

#### Or, include `application/x-www-form-urlencoded` form data manually:

```js
const get = require(&#x27;simple-get&#x27;)

const opts = {
  url: &#x27;http://example.com&#x27;,
  form: {
    key: &#x27;value&#x27;
  }
}
get.post(opts, function (err, res) {})
```

### Specifically disallowing redirects

```js
const get = require(&#x27;simple-get&#x27;)

const opts = {
  url: &#x27;http://example.com/will-redirect-elsewhere&#x27;,
  followRedirects: false
}
// res.statusCode will be 301, no error thrown
get(opts, function (err, res) {})
```

### Basic Auth

```js
const user = &#x27;someuser&#x27;
const pass = &#x27;pa$$word&#x27;
const encodedAuth = Buffer.from(`${user}:${pass}`).toString(&#x27;base64&#x27;)

get(&#x27;http://example.com&#x27;, {
  headers: {
    authorization: `Basic ${encodedAuth}`
  }
})
```

### OAuth

You can use the [`oauth-1.0a`](https://github.com/ddo/oauth-1.0a) module to create
a signed OAuth request:

```js
const get = require(&#x27;simple-get&#x27;)
const crypto  = require(&#x27;crypto&#x27;)
const OAuth = require(&#x27;oauth-1.0a&#x27;)

const oauth = OAuth({
  consumer: {
    key: process.env.CONSUMER_KEY,
    secret: process.env.CONSUMER_SECRET
  },
  signature_method: &#x27;HMAC-SHA1&#x27;,
  hash_function: (baseString, key) =&gt; crypto.createHmac(&#x27;sha1&#x27;, key).update(baseString).digest(&#x27;base64&#x27;)
})

const token = {
  key: process.env.ACCESS_TOKEN,
  secret: process.env.ACCESS_TOKEN_SECRET
}

const url = &#x27;https://api.twitter.com/1.1/statuses/home_timeline.json&#x27;

const opts = {
  url: url,
  headers: oauth.toHeader(oauth.authorize({url, method: &#x27;GET&#x27;}, token)),
  json: true
}

get(opts, function (err, res) {})
```

### Throttle requests

You can use [limiter](https://github.com/jhurliman/node-rate-limiter) to throttle requests. This is useful when calling an API that is rate limited.

```js
const simpleGet = require(&#x27;simple-get&#x27;)
const RateLimiter = require(&#x27;limiter&#x27;).RateLimiter
const limiter = new RateLimiter(1, &#x27;second&#x27;)

const get = (opts, cb) =&gt; limiter.removeTokens(1, () =&gt; simpleGet(opts, cb))
get.concat = (opts, cb) =&gt; limiter.removeTokens(1, () =&gt; simpleGet.concat(opts, cb))

var opts = {
  url: &#x27;http://example.com&#x27;
}

get.concat(opts, processResult)
get.concat(opts, processResult)

function processResult (err, res, data) {
  if (err) throw err
  console.log(data.toString())
}
```

## license

MIT. Copyright (c) [Feross Aboukhadijeh](http://feross.org).
</pre>
</body>
</html>