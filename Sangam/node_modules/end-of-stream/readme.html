<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>readme.html</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<pre># end-of-stream

A node module that calls a callback when a readable/writable/duplex stream has completed or failed.

	npm install end-of-stream

[![Build status](https://travis-ci.org/mafintosh/end-of-stream.svg?branch=master)](https://travis-ci.org/mafintosh/end-of-stream)

## Usage

Simply pass a stream and a callback to the `eos`.
Both legacy streams, streams2 and stream3 are supported.

``` js
var eos = require(&#x27;end-of-stream&#x27;);

eos(readableStream, function(err) {
  // this will be set to the stream instance
	if (err) return console.log(&#x27;stream had an error or closed early&#x27;);
	console.log(&#x27;stream has ended&#x27;, this === readableStream);
});

eos(writableStream, function(err) {
	if (err) return console.log(&#x27;stream had an error or closed early&#x27;);
	console.log(&#x27;stream has finished&#x27;, this === writableStream);
});

eos(duplexStream, function(err) {
	if (err) return console.log(&#x27;stream had an error or closed early&#x27;);
	console.log(&#x27;stream has ended and finished&#x27;, this === duplexStream);
});

eos(duplexStream, {readable:false}, function(err) {
	if (err) return console.log(&#x27;stream had an error or closed early&#x27;);
	console.log(&#x27;stream has finished but might still be readable&#x27;);
});

eos(duplexStream, {writable:false}, function(err) {
	if (err) return console.log(&#x27;stream had an error or closed early&#x27;);
	console.log(&#x27;stream has ended but might still be writable&#x27;);
});

eos(readableStream, {error:false}, function(err) {
	// do not treat emit(&#x27;error&#x27;, err) as a end-of-stream
});
```

## License

MIT

## Related

`end-of-stream` is part of the [mississippi stream utility collection](https://github.com/maxogden/mississippi) which includes more useful stream modules similar to this one.
</pre>
</body>
</html>